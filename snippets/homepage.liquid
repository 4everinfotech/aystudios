<div id="fullpage1" class="homepage">
  {% if shop.metafields.two_column_slide.display_slide == 1 %}
    {% include 'two_column_slide', section_number: "two_column_slide" %}
  {% endif %}
  {% if shop.metafields.two_column_slide_big_pic_right_side.display_slide == 1 %}
    {% include 'two_column_slide_big_pic_right_side', section_number: "two_column_slide_big_pic_right_side" %}
  {% endif %}
  {% if shop.metafields.one_column_general.display_slide == 1 %}
    {% include 'one_column_general_slide', section_number: "one_column_general_slide" %}
  {% endif %}
  {% if shop.metafields.one_column_slide.display_slide == 1 %}
    {% include 'one_column_slide', section_number: "one_column_slide" %}
  {% endif %}
  {% comment %} {% if shop.metafields.we_make_handmade.display_slide == 1  %}
    {% include 'homemade_glasses', section_number:"homemade_glasses" %}
  {% endif %} {% endcomment %}
  {% if shop.metafields.2_column_2_product.display_slide == 1  %}
    {% include 'two_column_two_product', section_number:"two_column_two_product" %}
  {% endif %}
  {% comment %} {% if shop.metafields.one_column_story.display_slide == 1  %}
    {% include 'one_column_story', section_number:"one_column_story" %}
  {% endif %} {% endcomment %}

    {% if shop.metafields.three_col_3_product.display_slide == 1 %}
  {% include 'three_col_3_product', section_number: "three_col_3_product" %}
  {% endif %}
  {% if shop.metafields.n_scrolling_text.display_slide == 1 %}
    {% include 'marquee_tag', section_number: "marquee_tag" %}
  {% endif %}
  {% if shop.metafields.2_column_1_product.display_slide == 1 %}
    {% include 'two_column_one_product', section_number: "two_column_one_product" %}
  {% endif %}
  {% if shop.metafields.2_column_1_product_right.display_slide == 1 %}
    {% include 'two_column_one_product_right', section_number: "two_column_one_product_right" %}
  {% endif %}
    {% if shop.metafields.followthesun.display_slide == 1 %}
  {% include 'followthesun', section_number: "followthesun" %}
{% endif %}
</div>

  {% if shop.metafields.fp_fullslide_video.disable_video_slide != 1 %}
    {% if shop.metafields.fp_fullslide_video.vimeo_video_id != blank %}
    {% assign vimeo_video = shop.metafields.fp_fullslide_video.vimeo_video_id %}
  {% else %}
    {% assign vimeo_video = 693990646 %}
  {% endif %}
  <script type="text/javascript">
    // Use Intersection Observer to lazy load the Vimeo player
    if ($('#vimeo-video').length > 0) {
      var observerVimeoVideo = new IntersectionObserver(function(entries, observer) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            // Initialize the Vimeo player once the video is in the viewport
            var vimeo_video_id = {{ vimeo_video }}; // Ensure the variable is passed correctly

            var options = {
              id: vimeo_video_id,
              autoplay: true,
              loop: true,
              responsive: true,
              background: true,
            };

            // Initialize the Vimeo player
            var chasing = new Vimeo.Player('vimeo-video', options);

            // Stop observing once the video player is initialized
            observer.disconnect();
          }
        });
      }, {
        threshold: 0.05 // Trigger when 5% of the video is visible
      });

      // Start observing the Vimeo video container
      observerVimeoVideo.observe(document.querySelector('#vimeo-video'));
    }
  </script>
{% endif %}

{% if shop.metafields.fp_2_column.new_two_column_template.disable != 1 and shop.metafields.fp_2_column.new_two_column_template.display_video == 1 %}
  {% if shop.metafields.fp_2_column.new_two_column_template.vimeo_video_id != blank %}
    {% assign vimeo_video_id = shop.metafields.fp_2_column.new_two_column_template.vimeo_video_id %}
  {% else %}
    {% assign vimeo_video_id = 253989945 %}
  {% endif %}
  <script type="text/javascript">
    // Use Intersection Observer to lazy load the Vimeo player for the fifth video
    if ($('#vimeo_video_id').length > 0) {
      var observerFifthVideo = new IntersectionObserver(function(entries, observer) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            // Initialize the Vimeo player once the video is in the viewport
            var vimeo_video_id = {{ vimeo_video_id }}; // Ensure the variable is passed correctly

            var options_fifth = {
              id: vimeo_video_id,
              autoplay: true,
              loop: true,
              responsive: true,
              background: true,
            };

            // Initialize the Vimeo player
            var chasing_fifth = new Vimeo.Player('vimeo_video_id', options_fifth);

            // Stop observing once the video player is initialized
            observer.disconnect();
          }
        });
      }, {
        threshold: 0.05 // Trigger when 5% of the video is visible
      });

      // Start observing the Vimeo video container
      observerFifthVideo.observe(document.querySelector('#vimeo_video_id'));
    }
  </script>
{% endif %}

{% if shop.metafields.fp_2_column.new_two_column_6th_template.disable != 1 and shop.metafields.fp_2_column.new_two_column_6th_template.display_video == 1 %}
  {% if shop.metafields.fp_2_column.new_two_column_6th_template.vimeo_video_id != blank %}
    {% assign vimeo_video_id_sixth = shop.metafields.fp_2_column.new_two_column_6th_template.vimeo_video_id %}
  {% else %}
    {% assign vimeo_video_id_sixth = 253989945 %}
  {% endif %}
  <script type="text/javascript">
    if ($('#vimeo_video_id_sixth').length > 0) {
      var observerSixthVideo = new IntersectionObserver(function(entries, observer) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            // Initialize the Vimeo player once the video is in the viewport
            var vimeo_video_id_sixth = {{ vimeo_video_id_sixth }}; // Ensure the variable is passed correctly

            var options_sixth = {
              id: vimeo_video_id_sixth,
              autoplay: true,
              loop: true,
              responsive: true,
              background: true,
            };

            // Initialize the Vimeo player
            var chasing_sixth = new Vimeo.Player('vimeo_video_id_sixth', options_sixth);

            // Stop observing once the video player is initialized
            observer.disconnect();
          }
        });
      }, {
        threshold: 0.05 // Trigger when 5% of the video is visible
      });

      // Start observing the Vimeo video container
      observerSixthVideo.observe(document.querySelector('#vimeo_video_id_sixth'));
    }
  </script>
{% endif %}

{% if shop.metafields.fp_fullslide_story.disable_story_slide != 1 %}
  {% if shop.metafields.fp_fullslide_story.story_url != blank %}
    {% assign story_url = shop.metafields.fp_fullslide_story.story_url %}
  {% else %}
    {% assign story_url = "stories/following-dreams" %}
  {% endif %}

  {% assign article = articles[story_url] %}

  {% if article.metafields.cf_story.display_video == 1 %}
    {% if article.metafields.cf_story.vimeo_video_id != blank %}
      {% assign story_vimeo_video_id = article.metafields.cf_story.vimeo_video_id %}
    {% else %}
      {% assign story_vimeo_video_id = 253989945 %}
    {% endif %}
    <script type="text/javascript">
      if ($('#story_vimeo_video_id').length > 0) {
        var observerStoryVideo = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              // Initialize the Vimeo player once the video is in the viewport
              var story_vimeo_video_id = {{ story_vimeo_video_id }}; // Ensure the variable is passed correctly

              var options_story = {
                id: story_vimeo_video_id,
                autoplay: true,
                loop: true,
                responsive: true,
                background: true,
              };

              // Initialize the Vimeo player
              var chasing_story = new Vimeo.Player('story_vimeo_video_id', options_story);

              // Stop observing once the video player is initialized
              observer.disconnect();
            }
          });
        }, {
          threshold: 0.05 // Trigger when 5% of the video is visible
        });

        // Start observing the Vimeo video container
        observerStoryVideo.observe(document.querySelector('#story_vimeo_video_id'));
      }
    </script>
  {% endif %}
{% endif %}

{% assign followthesun_video_id = 618752735 %}
<script type="text/javascript">
  if ($('#followthesun_video_id').length > 0) {
    var observerFollowTheSun = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          // Initialize the Vimeo player once the video is in the viewport
          var followthesun_video_id = {{ followthesun_video_id }}; // Ensure the variable is passed correctly

          var options_followthesun = {
            id: followthesun_video_id,
            autoplay: true,
            loop: true,
            responsive: true,
            background: true,
          };

          // Initialize the Vimeo player
          var chasing_followthesun = new Vimeo.Player('followthesun_video_id', options_followthesun);

          // Stop observing once the video player is initialized
          observer.disconnect();
        }
      });
    }, {
      threshold: 0.05 // Trigger when 5% of the video is visible
    });

    // Start observing the Vimeo video container
    observerFollowTheSun.observe(document.querySelector('#followthesun_video_id'));
  }
</script>

{% if shop.metafields.one_column_general.display_slide == 1 %}
  {% if shop.metafields.one_column_general.display_video == 1 %}
    {% if shop.metafields.one_column_general.video_id != blank %}
      {% assign vimeo_video = shop.metafields.one_column_general.video_id %}
    {% else %}
      {% assign vimeo_video = 693990646 %}
    {% endif %}
    <script type="text/javascript">
      if ($('#one_column_general_vimeo-video').length > 0) {
        var observerOneColumnGeneral = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              // Initialize the Vimeo player once the video is in the viewport
              var one_column_general_vimeo_video_id = {{ vimeo_video }}; // Ensure the variable is passed correctly

              var options_general = {
                id: one_column_general_vimeo_video_id,
                autoplay: true,
                loop: true,
                responsive: true,
                background: true,
              };

              // Initialize the Vimeo player
              var chasing_general = new Vimeo.Player('one_column_general_vimeo-video', options_general);

              // Stop observing once the video player is initialized
              observer.disconnect();
            }
          });
        }, {
          threshold: 0.05 // Trigger when 5% of the video is visible
        });

        // Start observing the Vimeo video container
        observerOneColumnGeneral.observe(document.querySelector('#one_column_general_vimeo-video'));
      }
    </script>
  {% endif %}
{% endif %}
{% if shop.metafields.one_column_slide.display_slide == 1 %}
  {% if shop.metafields.one_column_slide.display_video == 1 %}
    {% if shop.metafields.one_column_slide.video_id != blank %}
      {% assign vimeo_video = shop.metafields.one_column_slide.video_id %}
    {% else %}
      {% assign vimeo_video = 693990646 %}
    {% endif %}
    <script type="text/javascript">
      if ($('#one_column_slide_vimeo-video').length > 0) {
        var observerOneColumnSlide = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              // Initialize the Vimeo player once the video is in the viewport
              var one_column_slide_vimeo_video_id = {{ vimeo_video }}; // Ensure the variable is passed correctly

              var options_slide = {
                id: one_column_slide_vimeo_video_id,
                autoplay: true,
                loop: true,
                responsive: true,
                background: true,
              };

              // Initialize the Vimeo player
              var chasing_slide = new Vimeo.Player('one_column_slide_vimeo-video', options_slide);

              // Stop observing once the video player is initialized
              observer.disconnect();
            }
          });
        }, {
          threshold: 0.05 // Trigger when 5% of the video is visible
        });

        // Start observing the Vimeo video container
        observerOneColumnSlide.observe(document.querySelector('#one_column_slide_vimeo-video'));
      }
    </script>
  {% endif %}
{% endif %}